((t,e)=>{"function"==typeof define&&define.amd?define([],e):"object"==typeof module?module.exports=e():t.format=e()})(this,function(){return function(t,e){if(!t||isNaN(+e))return e;var n,i,r,s,l,o=t.length,f=t.search(/[0-9\-\+#]/),h=0<f?t.substring(0,f):"",g=t.split("").reverse().join(""),u=g.search(/[0-9\-\+#]/),d=o-u,a=t.substring(d,1+d),c=d+("."===a||","===a?1:0),a=0<u?t.substring(c,o):"",u=(e="-"===(t=t.substring(f,c)).charAt(0)?-e:+e)<0?e=-e:0,p=(f=t.match(/[^\d\-\+#]/g))&&f[f.length-1]||".",b=f&&f[1]&&f[0]||",";if(t=t.split(p),e=+(e=e.toFixed(t[1]&&t[1].length))+"",s=t[1]&&t[1].lastIndexOf("0"),(!(r=e.split("."))[1]||(r[1],r[1].length<=s))&&(e=(+e).toFixed(s+1)),s=t[0].split(b),t[0]=s.join(""),-1<(n=t[0]&&t[0].indexOf("0")))for(;r[0].length<t[0].length-n;)r[0]="0"+r[0];else 0==+r[0]&&(r[0]="");if((e=e.split("."))[0]=r[0],i=s[1]&&s[s.length-1].length){for(g="",d=(l=e[0]).length%i,o=l.length,c=0;c<o;c++)g+=l.charAt(c),!((c-d+1)%i)&&c<o-i&&(g+=b);e[0]=g}return e[1]=t[1]&&e[1]?p+e[1]:"",h+((u="0"!==(f=e.join(""))&&""!==f?u:!1)?"-":"")+f+a}});