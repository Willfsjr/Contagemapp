var cronappModules=["ui.router","ui-select-infinity","ui.select","ngResource","ngSanitize","custom.controllers","custom.services","datasourcejs","chart.js","pascalprecht.translate","tmh.dynamicLocale","ui-notification","ui.bootstrap","ngFileUpload","report.services","dashboard.services","upload.services","ui.tinymce","ngCookies","kendo.directives","sync.service"];window.customModules&&(cronappModules=cronappModules.concat(window.customModules));var onloadCallback=function(){window.grecaptcha.render("loginRecaptcha"),window.grecaptcha.reset()},getRequestData=e=>{let t=e||{};return e.data&&"object"==typeof e.data&&(t=e.data),t},customizeRoute=()=>{window.mainRoute="views/login.view.html";var e=$.get({url:"cronapp.json",async:!1}).responseJSON["cronapp.framework.web.mainroute"];e&&(window.mainRoute=e)},app=(window,customizeRoute(),angular.module("MyApp",cronappModules).constant("LOCALES",{locales:{pt_br:"Portugues (Brasil)",en_us:"English"},preferredLocale:"pt_br",urlPrefix:""}).config(["$locationProvider",function(e){e.hashPrefix("")}]).config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|javascript|chrome-extension):/)}]).config(["$stateProvider","$urlRouterProvider","NotificationProvider",function(e,t,o){o.setOptions({delay:5e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"right",positionY:"top",templateUrl:"node_modules/cronapp-framework-js/components/templates/angular-ui-notification.template.html"}),window.NotificationProviderOptions=o.options,window.stateProviderDefine.handle(e),t.otherwise("/error/404")}]).factory("originPath",["$location",function(e){return{request:function(t){return t.headers["origin-path"]=e.path(),t}}}]).config(["$logProvider",function(e){e.debugEnabled(!1)}]).config(["$httpProvider",function(e){e.interceptors.push("originPath")}]).config(["$translateProvider","tmhDynamicLocaleProvider",function(e,t){e.uniformLanguageTag("bcp47"),e.useLoader("customTranslateLoader",{files:[{prefix:"i18n/locale_",suffix:".json"},{prefix:"node_modules/cronapp-framework-js/i18n/locale_",suffix:".json"},{prefix:"node_modules/cronapi-js/i18n/locale_",suffix:".json"}]}),e.registerAvailableLanguageKeys(window.translations.localesKeys,window.translations.localesRef).determinePreferredLanguage();var o=(window.navigator.userLanguage||window.navigator.language).replace("-","_").toLowerCase();e.use(o),e.preferredLanguage(o),e.fallbackLanguage("en_us"),e.useSanitizeValueStrategy("escaped"),t.localeLocationPattern("node_modules/angular-i18n/angular-locale_{{locale}}.js"),moment&&moment.locale(o)}]).config(["$sceProvider",function(e){e.enabled(!1)}]).directive("crnValue",["$parse",function(e){return{restrict:"A",require:"^ngModel",link:function(t,o,n,r){var a;a=n.value?n.value:e(n.crnValue)(t),o.attr("data-evaluated",JSON.stringify(a)),o.bind("click",(function(e){t.$apply(function(){r.$setViewValue(a),$(o).data("changed",!0)}.bind(o))})),t.$watch((function(){return r.$modelValue}),(function(e,t){if(e!==t){var n=o.attr("data-evaluated"),r=$(o).data("changed");$(o).data("changed",!1),r||(e&&JSON.stringify(""+e)===n?$(o)[0].checked=!0:$(o)[0].checked=!1)}}))}}}]).decorator("$xhrFactory",["$delegate","$injector",function(e,t){return function(o,n){var r=e(o,n),a=t.get("$http"),i=a.pendingRequests[a.pendingRequests.length-1];return angular.isFunction(i.onProgress)&&r.upload.addEventListener("progress",i.onProgress),r}}]).controller("PageController",["$controller","$scope","$stateParams","$location","$http","$rootScope","$translate","Notification","UploadService","$timeout","$state","ReportService","DashboardService",function(e,t,o,n,r,a,i,s,c,l,u,p,f){t.params=o,t.$http=r,t.Notification=s,t.UploadService=c,t.$state=u,app.registerEventsCronapi(t,i,n),$("form").kendoValidator({errorTemplate:'<span class="k-widget k-tooltip-validation k-x-invalid-msg-block">#=message#</span>',messages:{required:""}}),a.getReport=function(e,t,o){p.openReport(e,t,o)},a.getDashboard=function(e,t,o){f.openDashboard(e,t,o)};var d=n.search();for(var g in d)d.hasOwnProperty(g)&&(t.params[g]=d[g]);try{var h=e("AfterPageController",{$scope:t});app.copyContext(h,this,"AfterPageController")}catch(e){}l((function(){t.blockly&&t.blockly.events&&t.blockly.events.afterPageRender&&t.blockly.events.afterPageRender instanceof Function&&t.blockly.events.afterPageRender()}))}]).run(["$rootScope","$state","$stateParams","$timeout","$transitions",function(e,t,o,n,r){e.$state=t,e.$stateParams=o,r.onSuccess({},(t=>{return o=t.to(),void n((()=>{let t,n=$("#projectName").length?$("#projectName").val():$("h1:first").length&&$("h1:first").text().trim().length?$("h1:first").text().trim():"",r=window.location.hash;null!==(m=/\/(?:.(?!\/))+$/gm.exec(r))?m.forEach((e=>t=e)):t=o.name;let a=$("form[crn-datasource]").length,i=window.camelCaseToSentenceCase(window.toCamelCase(t.split("?")[0].replace("/","")));a&&($("h1.title").length?i=$("h1.title").text():$("h2.title").length&&(i=$("h2.title").text()));let s="";s=i+(n.length?" - "+n:""),e.viewTitle=s||o.name,e.viewTitleOnly=i||o.name,e.systemName=n;let c=$(".main-nav-link");if(c&&c.length&&$($(".main-nav-link").get(0)).is(":visible"))$(".main-access").focus();else{let e=$("[role=main]").find("input");if(e&&e.length){let t=["date","datetime","time"],o=$(e[0]);t.includes(o.data("type"))||o.focus()}}e.renderFinished=!0,registerComponentScripts()}));var o})),t.defaultErrorHandler((e=>function(e){if(e){const o=e.toString();6===e.type&&e.detail.config.url.includes("=_.view.html")?t.go("login"):o.includes("=404")?t.go("404"):o.includes("=403")?t.go("403"):o.includes("=401")?(localStorage.removeItem("_u"),t.go("loginReturnUrl",{returnUrl:window.location.hash})):t.go("404")}else t.go("404")}(e)))}]).config(["$httpProvider",function(e){e.defaults.withCredentials=!0,e.interceptors.push((function(){return{request:function(e){const t=localStorage.getItem("csrfToken")||"";return t&&(e.headers["X-CSRF-TOKEN"]=t),e},response:function(e){const t=e.headers("X-CSRF-TOKEN");return t&&localStorage.setItem("csrfToken",t),e},responseError:function(e){const t=e.headers("X-CSRF-TOKEN");return t&&localStorage.setItem("csrfToken",t),Promise.reject(e)}}}))}]));app.userEvents={},app.config={},app.config.datasourceApiVersion=2,app.bindScope=function(e,t){var o={};for(var n in t)"string"==typeof t[n]||"boolean"==typeof t[n]?o[n]=t[n]:"function"==typeof t[n]?o[n]=t[n].bind(e):o[n]=app.bindScope(e,t[n]);return o},app.registerEventsCronapi=function(e,t,o){let n=e.params||{},r=o&&o.search()||{};e.params={};let a=(e,t)=>{for(let o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};for(var i in a(n,e.params),a(r,e.params),app.userEvents)e[i]=app.userEvents[i].bind(e);e.vars={},e.$evt=$evt;try{cronapi&&(e.cronapi=app.bindScope(e,cronapi),e.cronapi.$scope=e,e.safeApply=safeApply,t&&(e.cronapi.$translate=t))}catch(e){console.info("Not loaded cronapi functions"),console.info(e)}try{blockly&&(blockly.cronapi=cronapi,e.blockly=app.bindScope(e,blockly))}catch(e){console.info("Not loaded blockly functions"),console.info(e)}},app.copyContext=function(e,t,o){if(e)for(var n in e)t[n]?t[n+o]=e[n]:t[n]=e[n]},app.factory("customTranslateLoader",["$http","$q",function(e,t){return function(o){if(!(o&&(angular.isArray(o.files)||angular.isString(o.prefix)&&angular.isString(o.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");o.files||(o.files=[{prefix:o.prefix,suffix:o.suffix}]);for(var n=function(n){if(!n||!angular.isString(n.prefix)||!angular.isString(n.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var r=t.defer();return e(angular.extend({url:[n.prefix,o.key,n.suffix].join(""),method:"GET",params:""},o.$http)).then((function(e){r.resolve(getRequestData(e))})).catch((function(){r.resolve({})})),r.promise},r=t.defer(),a=[],i=o.files.length,s=0;s<i;s++)a.push(n({prefix:o.files[s].prefix,key:o.key,suffix:o.files[s].suffix}));return t.all(a).then((function(e){for(var t=e.length,o={},n=0;n<t;n++)for(var a in e[n])o[a]=e[n][a];r.resolve(o)}),(function(e){r.reject(e)})),r.promise}}]),window.safeApply=function(e){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?e&&"function"==typeof e&&e():this.$apply(e)},window.toCamelCase=function(e){return null!==e?e.toLowerCase().replace(/[-_\.]+/g," ").replace(/[^\w\s]/g,"").replace(/ (.)/g,(function(e){return e.toUpperCase()})).replace(/ /g,""):e},window.camelCaseToSentenceCase=function(e){if(null!==e){let t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}return e};const keyCodeFormActions={initialize:()=>$(document).on("keypress","form[crn-datasource]",keyCodeFormActions.handle),handle:e=>!keyCodeFormActions[e.keyCode||e.which]||keyCodeFormActions[e.keyCode||e.which](e),13:e=>{e.target&&"textarea"===e.target.type||e.preventDefault()}};keyCodeFormActions.initialize();var registerComponentScripts=function(){$(".carousel-indicators li").on("click",(function(){var e="#"+$(this).parent().parent().parent().attr("id"),t=$(e+" .carousel-indicators li").index(this);$(e+" > div").carousel(t)}))};